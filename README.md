# IOT-mini-project

In this project, a DC Motor having a rotational frequency of 10 is used to achieve the linear motion of the street light along the pole on which it is supported, keeping in mind the fact that its ascent and descent along the pole should be smooth and slow.

In order to interface the DC Motor with the NodeMCU, we make use of a (L293D) Motor Driver.

An external power supply, a 9V battery is connected to the motor driver for the motor to function efficiently.

A Light Dependent Resistor (LDR) is used to detect   whether the LED of the street light is in on or off state. Thus, this LDR is placed such that it faces the LED within the street light pole. 
In order to know whether the light is on or off state, we need the readings of LDR to be observed somewhere continuously and hence we make use of ThingSpeak, which is an open source Internet of Things (IoT) application which provides an API key to store and retrieve data from things using the HTTP protocol over the Internet or via a Local Area Network.
In this case, we use this API for our LDR to communicate with our NodeMCU and give its analog values and the digital value which serves as the indication of bulb fuse in the form of a dashboard containing graphs. These graphs get auto-populated whenever our LED is switched on or off, as follows:

1.	The API key of the ThingSpeak platform is included in our code, which ensures that it acts as a server to any client and can connect using the API Key generated by the platform itself. 

2.	After including this API Key in our code, we return to the platform and create a channel, which contains several empty spaces for Field values. 

3.	By creating our own dashboard with required fields, a graph is automatically generated with the field names enrolled, which are Intensity and Light Indication in this case. 

4.	Now, when our setup is supplied with voltage using a battery, the LED begins to glow, we can observe that the graph begins to populate automatically with the intensity and the light indication as switched on. 

5.	Once the light goes out, the analog value of the intensity of light as well as the digital value touches 0, and this graph is displayed to the concerned person.

6.	 As a result, it becomes easier to know when our bulb has fused out and this serves as the notification.

Now that we know how to detect whether a light is switched on or off, we need to know more about how to control this entire setup, i.e. the movement of the light in linearly up and down. 

As we are just exhibiting the working model of the mechanism, we need not always make the bulb to fuse out. So in that case we are controlling the led by using an app to make it off and on. 

This app has controls to move the light upward and downward. It also has separate controls to switch the light on and off.

The application also supports voice commands, and hence, when the user issues the command “forward”, then the light moves up.

When the user issues the command “reverse”, the light moves down. 

When the user issues the command “left”, the light is switched on and when the user issues the command “right”, the light is switched off.
 
Next, we need to understand that how NodeMCU acts as a hotspot for the clients to connect with the device and able to control the whole mechanism. Here, the client would be using the mobile phone used to control the movement of the street light and the server would be the NodeMCU. In order to control this setup, we need to make sure that the mobile phone and NodeMCU are connected to a common internet connection, preferably the hotspot for internet from the mobile phone. 

This is to ensure that the dynamic IP address generated by the NodeMCU remains the same for the same device. Once this dynamic IP address is generated, it needs to be entered in the space provided for it in the mobile application. This ensures that a secure connection is established between the mobile phone and the NodeMCU which affirms the proper connectivity of the app and the NodeMCU. 


WORKING OF THE AUTOMATIC STREET LIGHT MOVEMENT SYSTEM

•	When we upload the code that follows in the Arduino IDE, we configure the NodeMCU to help rotate the DC Motor in order to move the system supporting the light in the forward and reverse direction. 

•	The following code also configures the NodeMCU to enable the switching on and off of the LED.

•	After uploading the code, we connect the DC Motor’s Motor Driver to the external power supply.

•	Now, when we want the light to glow, we press the control arrow “left”, and can observe that the light glows. 

•	When we want to represent the switching off or fusing of the light, we press the control arrow “right”, and can observe that the light goes off. 

•	Now, when we want to replace the light, we will rotate the motor in the clockwise direction so that light attached to the belt rotated by the motor comes down for being replaced. For this, we press the control arrow “reverse”, and can observe that the light comes down for replacement. 

•	After replacing the light, we will rotate the motor in the anti-clockwise direction so that light attached to the belt rotated by the motor goes back up after being replaced. For this, we press the control arrow “forward”, and can observe that the light goes up after replacement.
